<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Bài cào</title>
    <style>
        body { font-family: 'Consolas', "courier new"; padding: 20px; }
        .result { margin-top: 20px; }
        .player { margin: 8px 0; }
        input { padding: 5px; }
        button { padding: 6px 12px; margin-left: 10px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>Chào mừng đến với bài cào!</h1>
    <p>Luật đơn giản: nhiều điểm nhất là thắng, nhưng đây không phải trò đếm điểm thông thường...</p>

    <label for="players">Nhập số lượng người chơi: </label>
    <input type="number" id="players" min="1" max="17" value="2">
    <button onclick="play()">Chơi ngay</button>

    <div class="result" id="result"></div>

    <script> // With the help from ChatGPT!! Original Python file's here: 
        function play() {
            let players = parseInt(document.getElementById("players").value);
            const resultDiv = document.getElementById("result");
            resultDiv.innerHTML = "";

            if (isNaN(players) || players <= 0) {
                resultDiv.innerHTML = "⚠️ Số người chơi phải lớn hơn 0!";
                return;
            }
            if (players > 17) {
                resultDiv.innerHTML = "⚠️ Quá đông! Mời nhập lại (tối đa 17)!";
                return;
            }

            let pack = [
                "A♠","2♠","3♠","4♠","5♠","6♠","7♠","8♠","9♠","10♠","J♠","Q♠","K♠",
                "A♣","2♣","3♣","4♣","5♣","6♣","7♣","8♣","9♣","10♣","J♣","Q♣","K♣",
                "A♦","2♦","3♦","4♦","5♦","6♦","7♦","8♦","9♦","10♦","J♦","Q♦","K♦",
                "A♥","2♥","3♥","4♥","5♥","6♥","7♥","8♥","9♥","10♥","J♥","Q♥","K♥"
            ];

            for (let i = pack.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [pack[i], pack[j]] = [pack[j], pack[i]];
            }

            let results = [];

            for (let i = 0; i < players; i++) {
                let hand = [pack.pop(), pack.pop(), pack.pop()];
                let ranks = hand.map(c => c.slice(0, -1));

                let points;
                if (ranks.every(r => ["J","Q","K"].includes(r))) {
                    points = "Ba cào!!!";
                } else {
                    let values = ranks.map(r => {
                        if (["J","Q","K"].includes(r)) return 10;
                        if (r === "A") return 1;
                        return parseInt(r);
                    });
                    points = values.reduce((a,b) => a+b, 0) % 10;
                }

                results.push(points);
                let p = document.createElement("div");
                p.className = "player";
                p.textContent = `Người chơi ${i+1}: [${hand.join(", ")}] => ${points}`;
                resultDiv.appendChild(p);
            }

            let final = document.createElement("div");
            final.innerHTML = "<strong>Kết quả:</strong> " + JSON.stringify(results);
            resultDiv.appendChild(final);
        }
    </script>
</body>
</html>
